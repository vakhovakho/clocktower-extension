const h="LOAD_STYLES",v="UNLOAD_STYLES",f={childList:!0,subtree:!0},a=new MutationObserver(t=>{var s;let e=document.querySelectorAll("#whispers li.video.storyteller"),r=document.querySelectorAll("ul.storytellers li.storyteller");for(let o=0;o<r.length;o++){let y=(s=r[o].querySelector("div.name span"))==null?void 0:s.innerText;for(let n=0;n<e.length;n++){let m=e[n].querySelector(".chat"),l=e[n].querySelector(".video"),i=e[n].querySelector(".name"),u=e[n].querySelector(".token");i.innerText.trim().startsWith(y)&&(e[n].style.position="fixed",e[n].style.bottom="106px",e[n].style.width="min(26vw, 26vh)",e[n].style[n===0?"left":"right"]="80px",m.style.borderRadius="50%",l.style.borderRadius="50%",l.style.borderColor="#6fbc6f",i.style.display="none",u.style.display="none")}}});function S(){let t=setInterval(()=>{const e=document.getElementById("center");e&&(a.observe(e,f),clearInterval(t))},2e3)}function c(){a.disconnect()}async function d(){return fetch("https://raw.githubusercontent.com/vakhovakho/clocktower-online-georgia-public/main/custom-css.css").then(t=>t.text()).then(t=>{let e=document.getElementById("mastermind-style");e&&e.remove();var r=document.createElement("style");r.id="mastermind-style",r.type="text/css",r.innerHTML=t,document.head.appendChild(r)})}chrome.storage.local.get(["styleLoaded"]).then(async t=>{if(t.styleLoaded===1)try{await d(),S()}catch(e){console.error(e)}});chrome.runtime.onMessage.addListener(function(t,e,r){if(t.action===h&&(d(),c()),t.action===v){let s=document.getElementById("mastermind-style");s&&s.remove(),c()}});
