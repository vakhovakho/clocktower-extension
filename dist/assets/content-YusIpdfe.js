const h="LOAD_STYLES",v="UNLOAD_STYLES",f={childList:!0,subtree:!0},a=new MutationObserver(r=>{var n;let e=document.querySelectorAll("#whispers li.video.storyteller"),s=document.querySelectorAll("ul.storytellers li.storyteller");for(let l=0;l<s.length;l++){let y=(n=s[l].querySelector("div.name span"))==null?void 0:n.innerText;for(let t=0;t<e.length;t++){let m=e[t].querySelector(".chat"),o=e[t].querySelector(".video"),i=e[t].querySelector(".name"),u=e[t].querySelector(".token");i.innerText.trim().startsWith(y)&&(e[t].style.position="fixed",e[t].style.bottom="106px",e[t].style.width="min(26vw, 26vh)",e[t].style[t===0?"left":"right"]="80px",m.style.borderRadius="50%",o.style.borderRadius="50%",o.style.borderColor="#6fbc6f",i.style.display="none",u.style.display="none")}}});function S(){let r=setInterval(()=>{const e=document.getElementById("center");e&&(a.observe(e,f),clearInterval(r))},2e3)}function c(){a.disconnect()}async function d(){const r=chrome.runtime.getURL("custom-css.css");return fetch(r).then(e=>e.text()).then(e=>{let s=document.getElementById("mastermind-style");s&&s.remove();var n=document.createElement("style");n.id="mastermind-style",n.type="text/css",n.innerHTML=e,document.head.appendChild(n)})}chrome.storage.local.get(["styleLoaded"]).then(async r=>{if(r.styleLoaded===1)try{await d(),S()}catch(e){console.error(e)}});chrome.runtime.onMessage.addListener(function(r,e,s){if(r.action===h&&(d(),c()),r.action===v){let n=document.getElementById("mastermind-style");n&&n.remove(),c()}});
