const v="LOAD_STYLES",S="UNLOAD_STYLES",f={childList:!0,subtree:!0},a=new MutationObserver(n=>{var r;let e=document.querySelectorAll("#whispers li.video.storyteller"),s=document.querySelectorAll("ul.storytellers li.storyteller");for(let l=0;l<s.length;l++){let y=(r=s[l].querySelector("div.name span"))==null?void 0:r.innerText;for(let t=0;t<e.length;t++){let m=e[t].querySelector(".chat"),o=e[t].querySelector(".video"),u=e[t].querySelector(".audio"),i=e[t].querySelector(".name"),h=e[t].querySelector(".token");if(i.innerText.trim().startsWith(y)){e[t].style.position="fixed",e[t].style.bottom="106px",e[t].style.width="min(26vw, 26vh)",e[t].style[l===0?"left":"right"]="80px",m.style.borderRadius="50%",o.style.borderRadius="50%",o.style.borderColor="#6fbc6f",i.style.display="none",h.style.display="none",u.style.display="none";break}}}});function c(){let n=setInterval(()=>{const e=document.getElementById("center");e&&(a.observe(e,f),clearInterval(n))},2e3)}function L(){a.disconnect()}async function d(){const n=chrome.runtime.getURL("custom-css.css");return fetch(n).then(e=>e.text()).then(e=>{let s=document.getElementById("mastermind-style");s&&s.remove();var r=document.createElement("style");r.id="mastermind-style",r.type="text/css",r.innerHTML=e,document.head.appendChild(r)})}chrome.storage.local.get(["styleLoaded"]).then(async n=>{if(n.styleLoaded===1)try{await d(),c()}catch(e){console.error(e)}});chrome.runtime.onMessage.addListener(function(n,e,s){switch(n.action){case v:d(),c();break;case S:let r=document.getElementById("mastermind-style");r&&r.remove(),L();break;case"ALERT":alert(n.message)}});
