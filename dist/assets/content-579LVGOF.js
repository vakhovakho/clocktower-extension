const v="LOAD_STYLES",f="UNLOAD_STYLES",S={childList:!0,subtree:!0},a=new MutationObserver(r=>{var t;let e=document.querySelectorAll("#whispers li.video.storyteller"),s=document.querySelectorAll("ul.storytellers li.storyteller");for(let l=0;l<s.length;l++){let y=(t=s[l].querySelector("div.name span"))==null?void 0:t.innerText;for(let n=0;n<e.length;n++){let m=e[n].querySelector(".chat"),o=e[n].querySelector(".video"),u=e[l].querySelector(".audio"),i=e[n].querySelector(".name"),h=e[n].querySelector(".token");if(i.innerText.trim().startsWith(y)){e[n].style.position="fixed",e[n].style.bottom="106px",e[n].style.width="min(26vw, 26vh)",e[n].style[l===0?"left":"right"]="80px",m.style.borderRadius="50%",o.style.borderRadius="50%",o.style.borderColor="#6fbc6f",i.style.display="none",h.style.display="none",u.style.display="none";break}}}});function L(){let r=setInterval(()=>{const e=document.getElementById("center");e&&(a.observe(e,S),clearInterval(r))},2e3)}function c(){a.disconnect()}async function d(){const r=chrome.runtime.getURL("custom-css.css");return fetch(r).then(e=>e.text()).then(e=>{let s=document.getElementById("mastermind-style");s&&s.remove();var t=document.createElement("style");t.id="mastermind-style",t.type="text/css",t.innerHTML=e,document.head.appendChild(t)})}chrome.storage.local.get(["styleLoaded"]).then(async r=>{if(r.styleLoaded===1)try{await d(),L()}catch(e){console.error(e)}});chrome.runtime.onMessage.addListener(function(r,e,s){if(r.action===v&&(d(),c()),r.action===f){let t=document.getElementById("mastermind-style");t&&t.remove(),c()}});
